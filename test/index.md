# Local Markdown Viewer - テストファイル一覧

このディレクトリには、Local Markdown Viewerの各機能をテストするためのMarkdownファイルが含まれています。

---

## 📋 テストファイル一覧

### 1. [基本機能テスト](basic-features.md)
**ファイル**: `basic-features.md`

Markdown基本構文とGitHub Flavored Markdown (GFM)の機能をテストします。

**テスト内容**:
- 見出し（H1〜H6）
- 段落と改行
- 強調（太字、斜体、打ち消し線）
- リスト（番号付き、番号なし、ネスト）
- タスクリスト（GFM）
- リンク（通常、自動リンク、内部リンク）
- 画像（data:URL）
- 引用（シンプル、ネスト）
- コード（インライン、コードブロック）
- テーブル（GFM）
- 水平線
- 複合的な要素

**推奨度**: ⭐⭐⭐⭐⭐ 最初に確認すべき基本テスト

---

### 2. [セキュリティテスト](security-tests.md)
**ファイル**: `security-tests.md`

DOMPurifyとContent Security Policy (CSP)によるXSS攻撃の防御機能をテストします。

**テスト内容**:
- scriptタグによる攻撃
- イベントハンドラによる攻撃（onclick, onerror, onloadなど）
- javascript:スキーム攻撃
- data:スキーム攻撃
- iframeによる攻撃
- object/embedによる攻撃
- styleによる攻撃
- SVGによる攻撃
- エンコーディングを使った攻撃
- 見出しとファイル名を使った攻撃

**期待される結果**: すべての攻撃がブロックされ、アラートは一切表示されない

**推奨度**: ⭐⭐⭐⭐⭐ セキュリティ確認のため必須

---

### 3. [HTMLタグテスト](html-tags-test.md)
**ファイル**: `html-tags-test.md`

GitHub互換のHTMLタグが正しく表示されることを確認します。

**テスト内容**:
- 安全なタグ（details/summary、kbd、mark、sub/sup、ins/del/s、tfoot）
- 危険なタグのエスケープ表示（script、iframe、form、style）
- イベントハンドラの削除確認

**期待される結果**:
- ✅ 安全なタグは正しく機能する
- ✅ 危険なタグは文字列として表示される（実行されない）
- ✅ イベントハンドラは削除される

**推奨度**: ⭐⭐⭐⭐ GitHub互換性確認のため重要

---

### 4. [KaTeX数式テスト](katex-tests.md)
**ファイル**: `katex-tests.md`

KaTeX数式レンダリング機能とそのセキュリティをテストします。

**テスト内容**:
- インライン数式（$...$、\(...\)）
- ディスプレイ数式（$$...$$、\[...\]）
- 基本的な数式要素（分数、累乗、根号）
- ギリシャ文字
- 演算子と記号
- 微積分
- 行列とベクトル
- 複雑な数式（フーリエ変換、シュレーディンガー方程式など）
- 場合分けと連立方程式
- 数式内のXSS攻撃テスト

**注意**: 右上の「TeX」ボタンをONにしてテストしてください。

**推奨度**: ⭐⭐⭐⭐ KaTeX機能を使用する場合は必須

---

### 5. [Mermaidダイアグラムテスト](mermaid-tests.md)
**ファイル**: `mermaid-tests.md`

Mermaidダイアグラム描画機能をテストします。

**テスト内容**:
- フローチャート（基本、複雑、カラフル）
- シーケンス図（rect色分け、条件分岐）
- クラス図（style方式、classDef方式）
- 状態遷移図（基本、ネスト）
- ガントチャート（done/active/critパターン）
- ER図
- 円グラフ
- Gitグラフ
- 色変換テスト（明るい色、暗い色、中間色）

**注意**: Mermaidダイアグラムは常にライトテーマで表示されます（ダークモード時も白背景）。

**推奨度**: ⭐⭐⭐⭐ Mermaid機能を使用する場合は必須

---

### 6. [シンタックスハイライトテスト](syntax-highlight-test.md)
**ファイル**: `syntax-highlight-test.md`

コードブロックのシンタックスハイライト機能をテストします。

**テスト内容**:
- JavaScript/TypeScript
- Python
- Java
- Go
- Rust
- その他の言語（HTML, CSS, SQL, Bashなど）
- 言語指定なしのコードブロック

**推奨度**: ⭐⭐⭐ コードを含むMarkdownを使用する場合

---

### 7. [ローカル画像テスト](local-images-test.md)
**ファイル**: `local-images-test.md`

ローカル画像ファイルの表示機能をテストします。

**テスト内容**:
- 相対パスでの画像参照
- 絶対パスでの画像参照
- data:URLでの画像表示
- 外部URL画像（ブロックされるべき）

**注意**: 実際のローカル画像ファイルが必要です。

**推奨度**: ⭐⭐ ローカル画像を使用する場合

---

### 8. [パフォーマンステスト](performance-test.md)
**ファイル**: `performance-test.md`

大量のコンテンツを含む重負荷テストファイルです。

**テスト内容**:
- 大量のMarkdown要素
- 大量のシンタックスハイライト（JavaScript, Python, Java, Go, Rust, SQL）
- 複雑なMermaidダイアグラム（フローチャート、シーケンス図、クラス図など）
- 大量のKaTeX数式（微積分、線形代数、統計学、物理学の数式）
- 複合コンテンツ（数式+コード、Mermaid+テーブルなど）
- 大量の見出し（目次生成テスト）

**目的**:
- ページ読み込み時間の測定
- スクロールの滑らかさの確認
- 非同期レンダリングの効果検証
- メモリ使用量の確認

**推奨度**: ⭐⭐ パフォーマンス検証時のみ

---

### 9. [ネットワークトラフィックテスト](network-test.md)
**ファイル**: `network-test.md`

外部ライブラリがデータを外部に送信していないことを確認します。

**テスト内容**:
- Chrome DevToolsのNetworkタブで通信を監視
- 拡張機能のリソース以外へのリクエストがないことを確認
- エクスポートHTML使用時のネットワークトラフィック確認

**期待される結果**:
- ✅ 拡張機能のローカルリソースのみを使用
- ✅ アナリティクス・トラッキングサービスへのリクエストが0件
- ✅ エクスポートHTML使用時もKaTeX CDNのみ（KaTeX ON時）

**推奨度**: ⭐⭐⭐ プライバシー確認のため重要

---

## 🔍 推奨テスト順序

新しいバージョンをテストする際は、以下の順序でテストすることを推奨します：

1. **基本機能テスト** (`basic-features.md`)
   - すべての基本機能が動作することを確認

2. **セキュリティテスト** (`security-tests.md`)
   - XSS攻撃がブロックされることを確認
   - アラートが一切表示されないことを確認

3. **HTMLタグテスト** (`html-tags-test.md`)
   - GitHub互換のHTMLタグが正しく機能することを確認
   - 危険なタグがエスケープ表示されることを確認

4. **シンタックスハイライトテスト** (`syntax-highlight-test.md`)
   - コードブロックが正しくハイライトされることを確認

5. **KaTeX数式テスト** (`katex-tests.md`)
   - 数式が正しくレンダリングされることを確認
   - 数式内のXSS攻撃がブロックされることを確認

6. **Mermaidダイアグラムテスト** (`mermaid-tests.md`)
   - すべての種類のダイアグラムが正しく描画されることを確認
   - ダークモード時も白背景で表示されることを確認

7. **ネットワークトラフィックテスト** (`network-test.md`)
   - 外部へのデータ送信がないことを確認

8. **パフォーマンステスト** (`performance-test.md`)（オプション）
   - 大量のコンテンツが正常に表示されることを確認
   - ページの読み込み速度とスクロール性能を確認

9. **ローカル画像テスト** (`local-images-test.md`)（オプション）
   - ローカル画像機能を使用する場合のみ

---

## ✅ テスト合格基準

すべてのテストが以下の条件を満たすことを確認してください：

### 基本機能
- [ ] すべてのMarkdown要素が正しくレンダリングされる
- [ ] GFM機能（タスクリスト、テーブル、打ち消し線）が動作する
- [ ] GitHubスタイルで表示される
- [ ] 目次が自動生成され、クリックでジャンプできる

### セキュリティ
- [ ] **アラートが一切表示されない**
- [ ] DOMPurifyがすべてのXSS攻撃をブロックしている
- [ ] F12コンソールに重大なエラーがない

### 機能
- [ ] シンタックスハイライトが正しく適用される
- [ ] KaTeX数式が正しくレンダリングされる
- [ ] Mermaidダイアグラムが正しく描画される
- [ ] ダークモード切り替えが正常に動作する
- [ ] 印刷機能が正常に動作する
- [ ] KaTeX ON/OFF切り替えが正常に動作する

### パフォーマンス
- [ ] 大量のコンテンツでも初期表示が高速（2秒以内）
- [ ] スクロールが滑らか
- [ ] ページがフリーズしない

---

## 🐛 問題が見つかった場合

テスト中に問題を見つけた場合は、以下の情報を記録してください：

1. **問題が発生したテストファイル**
2. **問題の内容**（スクリーンショット推奨）
3. **F12コンソールのエラーメッセージ**
4. **使用しているChromeのバージョン**
5. **再現手順**

---

## 📝 テストファイルの更新

新機能を追加した場合は、対応するテストファイルに新しいテストケースを追加してください。

- 基本的なMarkdown機能 → `basic-features.md`
- セキュリティ関連 → `security-tests.md`
- HTMLタグ機能 → `html-tags-test.md`
- 数式機能 → `katex-tests.md`
- ダイアグラム機能 → `mermaid-tests.md`
- シンタックスハイライト → `syntax-highlight-test.md`
- ネットワーク/プライバシー → `network-test.md`
